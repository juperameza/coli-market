<div id="carouselExampleControls" class="carousel slide w-100" data-bs-ride="carousel" <%= @posts_count <= 3 ? "data-bs-interval='false'" : "" %>>
  <div class="carousel-inner">
    <% if request.user_agent =~ /Mobile|webOS/ %>
      <% @posts.each_with_index do |post, index| %>
        <div class="carousel-item <%= index == 0 ? "active" : "" %>">
          <%= render 'posts/post_card', post: post %>
        </div>
      <% end %>
    <% else %>
      <% (@posts_count).times do |index| %>
        <div class="carousel-item <%= index == 0 ? "active" : "" %>">
          <div class="render__cards">
            <% @posts.each_with_index do |post, i| %>
              <% if (i+1 > ((index + 1) * 3) - 3) && (i+1 <= (index + 1) * 3) %>
                <%= render 'posts/post_card', post: post %>
              <% end %>
            <% end %>
          </div>
        </div>
      <% end %>
    <% end %>
  </div>

  <% if @posts_count > 3 %>
    <div class="carousel__buttons">
      <button class="carousel-control-prev <%= @posts_count <= 3 ? "d-none" : "" %>" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="prev">
        <i class="fa-solid fa-circle-arrow-left carousel__icon"></i>
      </button>
      <button class="carousel-control-next <%= @posts_count <= 3 ? "d-none" : "" %>" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="next">
        <i class="fa-solid fa-circle-arrow-right carousel__icon"></i>
      </button>
    </div>
  <% end %>
</div>
